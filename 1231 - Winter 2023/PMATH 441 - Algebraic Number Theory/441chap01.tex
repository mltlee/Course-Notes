\section{Algebraic Integers}\label{sec:1}

\subsection{Motivation}\label{subsec:1.1}
At its most elementary, number theory is the study of integers. Some of the 
hot topics typically discussed in a first-year number theory course 
include primes, divisibility, the Euclidean algorithm, and of most 
interest to us, prime factorization. Our goal in this course is to generalize 
these topics using commutative algebra. 

One naive approach would be to consider unique factorization domains, or 
UFDs. However, the canonical example of a principal ideal domain (PID) 
that is not a UFD is $\Z[\sqrt{5}]$, which is far too integer-like 
to be disqualified from our discussion. 

Let's do some investigation. Consider $\alpha = (1 + \sqrt{5})/2$. We have 
$(2\alpha - 1)^2 = 5$, and expanding gives us $4\alpha^2 - 4\alpha - 4 = 0$. 
In particular, we see that 
\[ \alpha^2 = \alpha + 1. \] 
Next, let's consider the ring $\Z[\alpha] = \{f(\alpha) : f(x) \in \Z[x]\}$. 
Since $\alpha^2 = \alpha + 1$, we have that
\[ \Z[\alpha] = \{a + b\alpha : a, b \in \Z\}, \] 
since there are no need for terms $\alpha^n$ with $n \geq 2$. What made 
this simplification work? 
\begin{enumerate}[(a)]
    \item We needed a monic polynomial $f(x) \in \Z[x]$ such that $f(\alpha) = 0$. 
    \item Moreover, notice that $5 \equiv 1 \pmod 4$, so we could nicely 
    divide all the terms by $4$ in the equation $4\alpha^2 - 4\alpha - 4 = 0$. 
\end{enumerate}
More generally, why do we want to work with $\Z[\alpha] = \Z + \Z\alpha 
+ \cdots + \Z\alpha^{n-1}$? This is because it allows us to do 
finite-dimensional ``linear algebra'' over $\Z$ (which is actually module 
theory, as we'll see soon).

\subsection{Algebraic Integers}\label{subsec:1.2}
Now that we are properly motivated, let's introduce the algebraic integers.

\begin{defn}{defn:1.1}
    We call $\alpha \in \C$ an {\bf algebraic integer} if there 
    exists a monic polynomial $f(x) \in \Z[x]$ such that $f(\alpha) = 0$. 
\end{defn}

Note that in the above definition, we do not insist that $f(x) \in \Z[x]$ 
is irreducible.

It is not hard to see that $n$ and $\sqrt{n}$ are algebraic integers for 
all $n \in \mathbb{Z}$. By our previous work, we see that $(1 + \sqrt{5})/2$ 
is an algebraic integer. It can also be shown that $i$, $1 + i$ and 
$\zeta_n = e^{2\pi i/n}$ are all algebraic integers.

We can ignore all transcendental numbers here, because they are certainly 
not algebraic integers. But how do we tell if an algebraic number $\alpha \in \C$ 
(i.e. $\alpha$ is algebraic over $\Q$) is an algebraic integer? The following 
theorem gives us a simple test to do so.

\begin{theo}{theo:1.2}
    An algebraic number $\alpha \in \C$ is an algebraic integer if and only if 
    its minimal polynomial over $\Q$ has integer coefficients.
\end{theo}

An easy corollary we can obtain is that the only algebraic integers 
in $\Q$ are the ordinary integers. Indeed, the minimal polynomial of 
a rational number $q \in \Q$ is $m(x) = x - q$, which is in $\Z[x]$ 
if and only if $q \in \Z$. 

For another example, let us consider $\beta = (1 + \sqrt{3})/2$ (noting that 
$3 \not\equiv 1 \pmod 4$ here). Performing the same manipulations as before, 
we deduce that $4\beta^2 - 4\beta - 2 = 0$ and hence $\beta^2 - \beta - 1/2 = 0$. 
In fact, $m(x) = x^2 - x - 1/2$ is the minimal polynomial for $\beta$ over 
$\Q$. Indeed, $m(x)$ is monic by performing the eyeball test, and it is 
irreducible since we know the roots are $(1 \pm \sqrt{3})/2$, which are 
not in $\Q$. By applying Theorem~\ref{theo:1.2}, it follows that $\beta$ is 
\emph{not} an algebraic integer. 

A concern one might have is that $\beta = (1 + \sqrt{3})/2$ also seems to be 
integer-like, and so we shouldn't dismiss it. However, we shouldn't expect 
it to work that nicely because it behaves more like a rational; we were 
more lucky with $\alpha = (1 + \sqrt{5})/2$ because it happened to be the 
case that $5 \equiv 1 \pmod 4$, as we observed earlier.

With these examples out of the way, let's jump into the proof of the theorem. 
Recall that for a polynomial $f(x) = a_n x^n + \cdots + a_1 x + a_0 \in \Z[x]$, 
the {\bf content} of $f(x)$ is 
\[ \Content(f(x)) = \gcd(a_n, a_{n-1}, \dots, a_0). \] 
We say that $f(x)$ is {\bf primitive} if $\Content(f(x)) = 1$. Moreover, 
an equivalent formulation of Gauss' lemma states that if $f(x), g(x) \in \Z[x]$ 
are primitive, then $f(x)g(x)$ is also primitive.

\begin{pf}[Theorem~\ref{theo:1.2}]
    $(\Leftarrow)$ This is immediate by considering the minimal polynomial 
    of $\alpha$ over $\Q$, say $m(x) \in \Z[x]$, which is monic and satisfies 
    $m(\alpha) = 0$. 

    $(\Rightarrow)$ Let $\alpha \in \C$ be an algebraic integer and let
    $m(x) \in \Q[x]$ be its minimal polynomial. Let $f(x) \in \Z[x]$ be 
    monic such that $f(\alpha) = 0$. Then by the properties of a minimal 
    polynomial, we have $m(x) \mid f(x)$. That is, we can write $f(x) = 
    m(x)g(x)$ for some $g(x) \in \Q[x]$. 

    Let $N_1, N_2 \in \N$ be minimal such that $N_1 m(x), N_2 g(x) \in \Z[x]$. 
    Note that if $p$ is a prime dividing all coefficients of $N_1 m(x)$, 
    then $(N_1/p)m(x) \in \Z[x]$, and in fact, we also have $N_1/p \in \Z$ 
    since $m(x)$ is monic. This contradicts the minimality of $N_1$, so 
    $N_1 m(x)$ must be primitive. Similarly, $N_2 g(x)$ is primitive by 
    the same argument, noting that $g(x)$ is monic since $f(x)$ and $m(x)$ are. 

    Now, observe that $N_1 N_2 f(x) = (N_1 m(x))(N_2 g(x))$ is primitive by 
    Gauss' lemma. Again, we note that $f(x)$ is monic, so equating contents 
    gives us $N_1 N_2 = 1$. It follows that $N_1 = N_2 = 1$, and 
    in particular, we have $m(x) \in \Z[x]$ as desired. \qed
\end{pf}

\subsection{Rings of Integers}\label{subsec:1.3}
We now work through an example which is considered a rite of passage through 
algebraic number theory. Let $d \in \Z$ be square-free where $d \neq 1$. 
Recall that being square-free means that there is no multiplicity in its 
prime factorization. Consider the field extension
\[ K = \Q(\sqrt{d}) = \{a + b\sqrt{d} : a, b \in \Q\}. \] 
In particular, $K/\Q$ is a finite extension and hence algebraic. We wish to 
find all the algebraic integers in $K$.

Suppose that $\alpha = a + b\sqrt{d}$ is an algebraic integer, and let 
$\overline\alpha = a - b\sqrt{d}$ be its complex conjugate. Using some 
Galois theory, the minimal polynomial of $\alpha$ is 
\[ m(x) = (x - \alpha)(x - \overline\alpha) = x^2 - 2ax + a^2 - db^2. \] 
We know that $m(x) \in \Z[x]$ by Theorem~\ref{theo:1.2}, so we must have 
$2a$, $a^2 - db^2 \in \Z$. Next, we have 
\[ 4(a^2 - db^2) = (2a)^2 - d(2b)^2 \in \Z, \] 
so $d(2b)^2 \in \Z$. Then by a denominator argument, we find that 
$2b \in \Z$ as well since $d$ is square-free.

Write $u = 2a$ and $v = 2b$ so that $a = u/2$ and $b = v/2$. We obtain 
\[ a^2 - db^2 = \left(\frac{u}{2}\right)^2 - d\left(\frac{v}{2}\right)^2 
= \frac{u^2 - dv^2}{4} \in \Z, \] 
so $u^2 - dv^2 \equiv 0 \pmod 4$. We now consider what form $\alpha$ 
can take under a few cases. Note that the $d \equiv 0 \pmod 4$ case is 
impossible since $d$ is square-free. 

\textbf{Case 1.} If $d \equiv 1 \pmod 4$, then $u^2 \equiv v^2 \pmod 4$. 
Recall that the square of an even number is $0 \pmod 4$ and the square 
of an odd number is $1 \pmod 4$, so this is equivalent to $u \equiv v \pmod 2$. 
That is, we have $\alpha = a + b\sqrt{d} = (u/2) + (v/2)\sqrt{d}$ for $u$ 
and $v$ with the same parity.

\textbf{Case 2.} If $d \equiv 2 \pmod 4$ or $d \equiv 3 \pmod 4$, then 
it can be shown that $u^2 - dv^2 \equiv 0 \pmod 4$ is equivalent to having 
$u \equiv v \equiv 0 \pmod 2$. This means that $\alpha = a' + b'\sqrt{d}$ for 
some $a', b' \in \Z$. 

We leave it as an exercise to check that these conditions are also sufficient, 
which can be done by reversing the arguments above.

More generally, given a finite field extension $K/\Q$, we want to describe 
all the algebraic integers in $K$. This leads us to the following definitions.

\begin{defn}{defn:1.3}
    We call a finite field extension $K$ of $\Q$ a {\bf number field}.
    For a number field $K$, we call 
    \[ \mathcal{O}_K = \{\alpha \in K : \alpha \text{ an algebraic integer}\} \] 
    the {\bf ring of integers} of $K$.
\end{defn}

Obviously, we'll need to prove that ${\cal O}_K$ is indeed a ring (namely, 
a subring of $\C$). To do this, we'll define 
\[ \mathbb{A} = \{z \in \C : z \text{ an algebraic integer}\} \] 
and show that $\mathbb{A}$ is a ring, which will imply that ${\cal O}_K 
= \mathbb{A} \cap K$ is a ring too. 

Before that, let's move on to some more definitions. Recall that in 
Section~\ref{subsec:1.1}, we wanted to work with 
\[ \Z[\alpha] = \Z + \Z\alpha + \cdots + \Z\alpha^{n-1} \] 
where $\alpha \in \mathbb{A}$ in order to do ``linear algebra'' over $\Z$. But $\Z$ is not a field, 
so we'll need something more general.

\begin{defn}{defn:1.4}
    Let $R$ be a ring. An {\bf $R$-module} is an abelian group $(M, +)$ 
    together with an operation $\cdot : R \times M \to M$ such that 
    \begin{enumerate}[(i)]
        \item for all $m \in M$, we have $1m = m$; 
        \item for all $r_1, r_2 \in R$ and $m \in M$, we have 
        $(r_1 + r_2)m = r_1m + r_2m$;
        \item for all $r \in R$ and $m_1, m_2 \in M$, we have 
        $r(m_1 + m_2) = rm_1 + rm_2$; 
        \item for all $r_1, r_2 \in R$ and $m \in M$, we have 
        $(r_1r_2)m = r_1(r_2m)$.
    \end{enumerate}
\end{defn}

We can think of the operation $\cdot : R \times M \to M$ as the ``$R$-action 
on $M$''. Note that if $R$ is a field, then an $R$-module is the same as 
an $R$-vector space, so this definition indeed captures the essence of doing
linear algebra. Let's go over a few examples of $R$-modules. 
\begin{enumerate}[(1)]
    \item Every ring $R$ is an $R$-module over itself with operation 
    $r \cdot m = rm$.
    \item If $S$ is a subring of $R$, then $R$ is an $S$-module with 
    operation $s \cdot r = sr$. 
    \item Thinking in the linear algebra setting, we can view $\R^n$ as an 
    $R$-module for every ring $R$ with operation $r \cdot [x_1, \dots, x_n]^T 
    = [rx_1, \dots, rx_n]^T$. 
    \item Let $R = \Z$ and let $(M, +)$ be an $R$-module. For $n \in \N$, 
    observe that 
    \begin{align*}
        n \cdot m &= (1 + \cdots + 1) \cdot m \\
        &= 1 \cdot m + \cdots + 1 \cdot m \\ 
        &= m + \cdots + m \\ 
        &= nm.
    \end{align*}
    Similarly, we can show that $(-n) \cdot m = -(n \cdot m) = -nm$. Therefore, 
    the only possible $\Z$-action on $M$ is the one we expect, namely that 
    of repeated addition. In particular, the $\Z$-module structure does not 
    impose anything on $M$; it is just an abelian group. 
\end{enumerate}

We now do a quick crash course in module theory and list more definitions.

\begin{defn}{defn:1.5}
    Let $R$ be a ring, and let $M$ be an $R$-module.
    \begin{enumerate}[(1)]
        \item We say that $N \subseteq M$ is an {\bf $R$-submodule} of $M$ 
        if $N$ is an $R$-module under the same operations as $M$. That is, 
        $N$ is an additive subgroup of $M$ closed under the $R$-action. 

        \item Let $M_1$ and $M_2$ be $R$-modules. Then $f : M_1 \to M_2$ 
        is a {\bf homomorphism} if 
        \begin{enumerate}[(i)]
            \item $f(m_1 + m_2) = f(m_1) + f(m_2)$ for all $m_1, m_2 \in M_1$; 
            \item $f(rm) = rf(m)$ for all $r \in R$ and $m \in M_1$. 
        \end{enumerate}
        If $f$ is also bijective, then we call it an {\bf isomorphism}. 
        
        \item We say that $M$ is {\bf finitely generated} if there exists 
        $m_1, \dots, m_n \in M$ such that 
        \[ M = Rm_1 + \cdots + Rm_n := \{r_1 m_1 + 
        \cdots + r_n m_n : r_1, \dots, r_n \in R\}. \] 
    \end{enumerate}
\end{defn}

For example, if we view $R$ as an $R$-module over itself, then the $R$-submodules 
are precisely the ideals of $R$. Indeed, by definition, ideals are 
additive subgroups that are closed under multiplication by $R$. In this course, 
there is no need to specify left or right ideals because we assume that every 
ring is commutative and unital.

Let's move back to number theory! We give a definition that takes the idea of 
algebraic integers and generalizes it to arbitrary rings. Note that 
in this course, the notation $R \subseteq S$ means that $R$ is a subring of $S$ 
under the same operations. 

\begin{defn}{defn:1.6}
    Let $R \subseteq S$ be integral domains. We say that $\alpha \in S$ 
    is {\bf integral} over $R$ if there exists a monic polynomial 
    $f(x) \in R[x]$ such that $f(\alpha) = 0$.
\end{defn}

If we take $R = \Z$ and $S = \C$, then being integral is the same as 
being an algebraic integer. All of these definitions are handy to know
for a course in commutative algebra, but why are we moving in this direction? 
The following theorem gives us a nice characterization of being integral, 
which allows us to apply it to our number theory setting for algebraic integers.

\begin{theo}{theo:1.7}
    Let $R \subseteq S$ be integral domains. Then $\alpha \in S$ is integral 
    over $R$ if and only if $R[\alpha] = \{f(\alpha) : f(x) \in R[x]\}$ is 
    finitely generated as an $R$-module. 
\end{theo}
\begin{pf}[Theorem~\ref{theo:1.7}]
    $(\Rightarrow)$ Let $\alpha \in S$ be integral over $R$. Then we can write 
    \[ \alpha^n + a_{n-1} \alpha^{n-1} + \cdots + a_1 \alpha + a_0 = 0 \] 
    for some $a_i \in R$, as $\alpha$ is the root of some monic polynomial over 
    $R$. In particular, we have 
    \[ \alpha^n = -a_{n-1} \alpha^{n-1} - \cdots - a_1 \alpha - a_0, \] 
    so every element in $R[\alpha]$ can be written as a linear combination 
    of elements from $\{1, \alpha, \dots, \alpha^{n-1}\}$. In other words, 
    $R[\alpha] = R + R\alpha + \cdots + R\alpha^{n-1}$ is finitely generated. 

    $(\Leftarrow)$ Since $R$ is finitely generated, we can write it in the form 
    \[ R[\alpha] = Rf_1(\alpha) + \cdots + Rf_n(\alpha) \] 
    for some polynomials $f_i(x) \in R[x]$. Take $N = \max_{1\leq i \leq n} 
    \{\deg f_i(x)\}$. Note that $\alpha^{N+1} \in R[\alpha]$, so we have 
    \[ \alpha^{N+1} = r_1 f_1(\alpha) + \cdots + r_n f_n(\alpha) \] 
    for some $r_i \in R$. Next, consider the polynomial 
    \[ g(x) = x^{N+1} - r_1 f_1(x) - \cdots - r_n f_n(x) \in R[x]. \] 
    Note that $g(\alpha) = 0$ and $g(x)$ is monic by our choice of $N$, so we conclude that 
    $\alpha$ is integral over $R$. \qed 
\end{pf}\vspace{-0.25cm}

As we have seen in a course in Galois theory, finding a polynomial 
$f(x) \in \Z[x]$ which has $\alpha$ as a root is generally a difficult task.
Showing that $\Z[\alpha]$ is finitely generated is often easier than doing this!

For a number field $K$, we still haven't shown that ${\cal O}_K$ is a ring. 
We mentioned our approach before, which is to show that 
$\mathbb{A} = \{z \in \C : z \text{ an algebraic integer}\}$ is a 
subring of $\C$, which implies that ${\cal O}_K = \mathbb{A} \cap K$ is also 
a ring. Let's try to do this now with the machinery we have. 

\begin{theo}{theo:1.8}
    The algebraic integers $\mathbb{A}$ form a subring of $\C$.
\end{theo}
\begin{pf}[Theorem~\ref{theo:1.8}]
    Let $\alpha, \beta \in \mathbb{A}$. By the subring test, it suffices to show that 
    $\alpha - \beta$ and $\alpha\beta$ are elements of $\mathbb{A}$. By 
    Theorem~\ref{theo:1.7}, we just need to show that $\Z[\alpha - \beta]$ 
    and $\Z[\alpha\beta]$ are finitely generated $\Z$-modules. 

    We know that $\Z[\alpha]$ and $\Z[\beta]$ are finitely generated 
    $\Z$-modules again by Theorem~\ref{theo:1.7}, so 
    we can write $\Z[\alpha] = \Z\alpha_1 + \cdots + \Z\alpha_n$ and 
    $\Z[\beta] = \Z\beta_1 + \cdots + \Z\beta_m$ for some 
    $\alpha_i \in \Z[\alpha]$ and $\beta_j \in \Z[\beta]$. Then 
    \[ \Z[\alpha, \beta] = \{f(\alpha, \beta) : f(x, y) \in \Z[x, y]\} \] 
    is also finitely generated as a $\Z$-module by 
    $\{\alpha_i \beta_j : 1 \leq i \leq n,\, 1 \leq j \leq m\}$. We have 
    that $\Z[\alpha-\beta]$ and $\Z[\alpha\beta]$ are $\Z$-submodules of 
    the finitely generated $\Z$-module $\Z[\alpha, \beta]$. \qed
\end{pf}

In our attempted argument above, we may have lost track of the goal. 
We see that $\Z[\alpha, \beta]$ is an extremely large $\Z$-module, and in 
fact, it is not true in general that a submodule of a finitely generated 
$R$-module is also finitely generated!

For example, take $R = \Z[x_1, x_2, \dots]$. Then $R$ is a finitely generated 
$R$-module since $R = R1$. However, consider the ideal $I = 
\langle x_1, x_2, \dots \rangle$, which is a submodule of $R$ as we 
discussed before. Then $I$ is not finitely generated because any 
possible generating set would only give us finitely many indeterminates. 

To get out of this mess, we need a new definition. 

\begin{defn}{defn:1.9}
    Let $R$ be a ring. We say that $R$ is {\bf Noetherian} if every 
    submodule (ideal) of $R$ (as an $R$-module) is finitely generated. 
\end{defn}

Now, the submodules of $\Z$ are the most finitely generated we could 
possibly get since $\Z$ is a PID (namely, every submodule is 
generated by a single element), so $\Z$ is Noetherian. In particular, the 
following theorem is enough to rescue our proof of Theorem~\ref{theo:1.8},
so $\mathbb{A}$ is a ring and so is ${\cal O}_K$ for a number field $K$. 

\begin{theo}{theo:1.10}
    Let $R$ be a Noetherian ring, and let $M$ be a finitely generated $R$-module. 
    Then every submodule of $M$ is also finitely generated. 
\end{theo}

We first make a reduction. Suppose that $M$ is a finitely generated $R$-module 
with $M = R\alpha_1 + \cdots + R\alpha_n$ for some $\alpha_i \in M$. This 
can be ``relabelled'' with a surjective homomorphism $f : R^n \to M$ 
defined by $(r_1, \dots, r_n) \mapsto r_1 \alpha_1 + \cdots + r_n \alpha_n$. 
In particular, if $N \subseteq M$ is a submodule, then $f^{-1}(N) \subseteq 
R^n$. Moreover, provided that $f^{-1}(N)$ is finitely generated, say 
$f^{-1}(N) = R\beta_1 + \cdots + R\beta_n$ for some $\beta_i \in N$, 
then $N = Rf(\beta_1) + \cdots + Rf(\beta_n)$ is also finitely generated.

\begin{pf}[Theorem~\ref{theo:1.10}]
    Due to the above reduction, we may assume that $M = R^n$. If $n = 1$, 
    then since $R$ is Noetherian, every submodule is finitely generated by 
    definition. Next, assume the result holds for $n$ and consider $M = R^{n+1}$.

    Consider the projection homomorphism $\pi : R^{n+1} \to R$ given by 
    \[ \pi(r_1, \dots, r_{n+1}) = r_{n+1}. \] 
    Let $N$ be a submodule of $M$, and consider the submodule 
    \[ N_1 = \{(r_1, \dots, r_{n+1}) \in N : r_{n+1} = 0\}. \] 
    This is isomorphic to a submodule of $R^n$ by simply ignoring the 
    last element, so $N_1$ is finitely generated by the inductive hypothesis. 
    Moreover, $N_2 = \pi(N)$ is a submodule of $R$, which is finitely 
    generated because $R$ is Noetherian. Thus, we can write 
    $N_1 = Rx_1 + \cdots + Rx_p$ for some $x_i \in N_1$ and 
    $N_2 = R\pi(y_1) + \cdots + R\pi(y_q)$ for some $y_j \in N$. 

    Let $x \in N$. Then by applying $\pi$ to $x$, we have 
    \[ \pi(x) = r_1 \pi(y_1) + \cdots + r_q \pi(y_q) \] 
    for some $r_1, \dots, r_q \in R$. But $\pi$ is a homomorphism, so 
    \[ \pi(x - r_1 y_1 - \cdots - r_q y_q) = 0. \] 
    This means that $x - r_1 y_1 - \cdots - r_q y_q \in N_1$, so we can 
    find $\tilde{r}_1, \dots, \tilde{r}_p \in R$ such that 
    \[ x - r_1 y_1 - \cdots - r_q y_q = \tilde{r}_1 x_1 + \cdots 
    + \tilde{r}_p x_p. \] 
    In particular, rearranging this gives us
    \[ x = r_1 y_1 + \cdots + r_q y_q + \tilde{r}_1 x_1 + \cdots 
    + \tilde{r}_p x_p, \] 
    so we deduce that $N = Ry_1 + \cdots + Ry_q + Rx_1 + \cdots + Rx_p$ 
    is finitely generated. \qed
\end{pf}

\subsection{Additive Structure}\label{subsec:1.4}
Let $K$ be a number field so that $[K : \Q] < \infty$. So far, it has been 
very useful to consider ${\cal O}_K$ as a $\Z$-module. Let's investigate the 
$\Z$-module $({\cal O}_K, +)$, throwing away the multiplicative structure. 

\begin{defn}{defn:1.11}
    Let $R$ be a ring and $M$ be an $R$-module.
    \begin{enumerate}[(1)]
        \item We say $B \subseteq M$ is {\bf linearly independent} 
        if for all $m_1, \dots, m_n \in B$, the dependence relation 
        $r_1 m_1 + \cdots + r_n m_n = 0$ implies that $r_1 = \cdots = r_n = 0$.
        \item We say $B \subseteq M$ {\bf spans} $M$ if for all $x \in M$, 
        there exist $b_1, \dots, b_n \in B$ and $r_1, \dots, r_n \in R$ such that 
        \[ x = r_1 b_1 + \cdots + r_n b_n. \] 
        \item We say $B \subseteq M$ is a {\bf basis} for $M$ if $B$ is a 
        linearly independent set that spans $M$. 
        \item If $M$ has a basis, we call it a {\bf free} $R$-module. The 
        (unique) size of a basis for $M$ is called the {\bf rank} of $M$, 
        denoted $\rank(M)$. 
    \end{enumerate}
\end{defn}

Note that $B \subseteq M$ is a basis for $M$ if and only if every $x \in M$ 
can be uniquely written as $x = r_1 b_1 + \cdots + r_n b_n$ for some 
$r_i \in R$ and $b_i \in B$. In particular, $M$ is free with 
$\rank(M) = n < \infty$ if and only if $M \cong R^n$ via the mapping 
$(r_1, \dots, r_n) \leftrightarrow r_1 b_1 + \cdots + r_n b_n$, where 
$B = \{b_1, \dots, b_n\}$ is a basis. We give some examples below.
\begin{enumerate}[(1)]
    \item Let $R = \Z$ and $M = \Z[x]$. Then $M$ has basis $B = 
    \{1, x, x^2, \dots\}$, so $M$ is free but not finitely generated. 
    \item Let $R = \Z$ and $M = \Z_2$. Note that $2 \cdot 1 = 0$, but 
    $2 \neq 0$ in $R$. This means that the only linearly independent 
    set is $\varnothing$, and since this is the only candidate for a 
    basis, it follows that $M$ is not free (but it is certainly 
    finitely generated).
    \item {\bf Warning!} Let $R = \Z$, $M = \Z \times \Z$, and $N = 
    \Z \times 2\Z$. Note that $M$ is free with basis 
    $B_1 = \{(1, 0), (0, 1)\}$ and has $\rank(M) = 2$. Similarly, 
    $N$ is free with basis $B_2 = \{(1, 0), (0, 2)\}$ and has 
    $\rank(N) = 2$. However, we have $M \neq N$! So unlike the linear 
    algebra we saw in previous courses where every linearly independent set 
    with size equal to the rank will also span, this is not the case here. 
\end{enumerate}
We now steal some facts from commutative algebra without proof. 

\begin{prop}{prop:1.12}
    Let $R$ be a PID. Let $M$ be a free $R$-module with $\rank(M) = n < \infty$. 
    \begin{enumerate}[(1)]
        \item Let $N \subseteq M$ be a submodule. Then $N$ is free with $\rank(N) \leq n$. 
        \item Any maximal linearly independent subset of $M$ has $n$ elements. 
    \end{enumerate}
\end{prop}

However, as we saw from the example above, being a maximal linearly 
independent subset of $M$ does not imply that it must span $M$.

Let $K$ be a number field with $[K : \Q] = n$. Our goal is to find 
an embedding (injective ring homomorphism) $\varphi : {\cal O}_K \to \Z^n$ 
such that $\rank(\varphi({\cal O}_K)) = n$. This will tell us that 
${\cal O}_K \cong \Z^n$ as $\Z$-modules. In particular, $({\cal O}_K, +)$ 
is a free $\Z$-module of rank $n$. This leads us to the following definition. 

\begin{defn}{defn:1.13}
    Let $M$ be a free $\Z$-module. A basis for $M$ is called an 
    {\bf integral basis}.
\end{defn}

In other words, an integral basis is just a basis in the case that $R = \Z$.

We now give the tools of the trade for algebraic number theory. These are 
not the usual definitions given in the literature, but we do it this way to 
motivate why they are called norms and traces.

\begin{defn}{defn:1.14}
    Let $K$ be a number field with $[K : \Q] = n$. Let 
    $\alpha \in K$ and let $T_\alpha : K \to K$ defined by 
    $T_\alpha(x) = \alpha x$ (which is viewed as a $\Q$-linear transformation).
    \begin{enumerate}[(1)]
        \item The {\bf trace} of $\alpha$ relative to $K/\Q$ is 
        \[ \Tr_{K/\Q}(\alpha) = \Tr(T_\alpha). \] 
        \item The {\bf norm} of $\alpha$ relative to $K/\Q$ is 
        \[ N_{K/\Q}(\alpha) = \det(T_\alpha). \] 
    \end{enumerate}
\end{defn}

Since $T_\alpha$ is a $\Q$-linear operator, the entries of any matrix 
representation must be rational. In particular, we have $\Tr_{K/\Q}(\alpha), 
N_{K/\Q}(\alpha) \in \Q$.

{\bf Investigation 1.} Let $K$ be a number field of degree $[K : \Q] = n$,
and let $\alpha \in K$. Let's see if we can find some properties of 
the trace and norm in the special case that $K = \Q(\alpha)$.

Let $\beta$ be a basis for $K/\Q$ and let $A = [T_\alpha]_\beta$, the matrix 
of $T_\alpha$ relative to $\beta$. Let
\[ f(x) = \det(xI - A) \in \Q[x] \] 
be the characteristic polynomial of $A$, and let $p(x) \in \Q[x]$ be the minimal 
polynomial of $A$. That is, $p(x)$ is the unique monic irreducible 
generating the ideal 
\[ \langle p(x) \rangle = \{g(x) \in \Q[x] : g(T_\alpha) = 0\}. \] 
Note that if $g(x) \in \Q[x]$ and $v \in K$, then 
\[ g(T_\alpha)(v) = g(\alpha) v \] 
since $T_\alpha^m(v) = \alpha^m v$ for all $m \in \N$. In particular, we have 
$g(T_\alpha) = 0$ if and only if $g(\alpha) = 0$, so $p(x)$ is also the 
minimal polynomial for $\alpha$ over $\Q$. Recall that Cayley-Hamilton 
states that an operator makes its characteristic polynomial vanish, so 
$f(\alpha) = f(T_\alpha) = 0$ and hence $p(x) \mid f(x)$.

Now, we have $\deg f(x) = [K : \Q] = n$ and $\deg p(x) = [\Q(\alpha) : 
\Q] = n$ since $K = \Q(\alpha)$. Since $f(x)$ and $p(x)$ are both monic, 
it turns out that $f(x) = p(x)$ in this special case. With this in mind, 
we are now equipped with several different ways to compute the trace and 
norm of $\alpha$ relative to $K/\Q$.

Let $\alpha = \alpha_1, \dots, \alpha_n$ be the conjugates of $\alpha$ 
(that is, the roots of $p(x)$ in $\C$). Recall that the roots of the characteristic 
polynomial of an operator are the eigenvalues $\lambda_i$ (with multiplicity).
Since $f(x) = p(x)$, we have $\lambda_i = \alpha_i$ and thus
\begin{align*}
    \Tr_{K/\Q}(\alpha) &= \Tr(A) = \sum_{i=1}^n \lambda_i = \sum_{i=1}^n \alpha_i, \\ 
    N_{K/\Q}(\alpha) &= \det(A) = \prod_{i=1}^n \lambda_i = \prod_{i=1}^n \alpha_i. 
\end{align*}
Moreover, if we explicitly expand out the terms in $p(x) = (x - \alpha_1)
(x - \alpha_2) \cdots (x - \alpha_n)$, then we obtain 
\begin{align*}
    \Tr_{K/\Q}(\alpha) &= \sum_{i=1}^n \alpha_i = -[x^{n-1}] p(x), \\ 
    N_{K/\Q}(\alpha) &= \prod_{i=1}^n \alpha_i = (-1)^n [x^0] p(x) = 
    (-1)^n p(0),
\end{align*}
where $[x^i] p(x)$ denotes the coefficient corresponding to the $x^i$ term 
in $p(x)$.

Finally, recall from Galois theory that the embeddings of $K = \Q(\alpha)$ 
into $\C$ must fix $\Q$ and are completely determined by their action on $\alpha$, 
which must be sent to another conjugate of $\alpha$. Writing the embeddings as 
$\sigma_i(\alpha) = \alpha_i$ for $i = 1, \dots, n$, we also see that 
\begin{align*}
    \Tr_{K/\Q}(\alpha) &= \sum_{i=1}^n \alpha_i = \sum_{i=1}^n \sigma_i(\alpha), \\ 
    N_{K/\Q}(\alpha) &= \prod_{i=1}^n \alpha_i = \prod_{i=1}^n \sigma_i(\alpha).
\end{align*}
The condition that $K = \Q(\alpha)$ was very restrictive. Let's now try 
to compute the trace and norm in the general case without this assumption. 
We will use the following lemma, whose proof is quite technical. 

\begin{lemma}{lemma:1.15}
    Let $K$ be a number field with $[K : \Q] = n$, and let $\alpha \in K$ 
    be such that $[K : \Q(\alpha)] = m$. Consider the map $T_\alpha : 
    K \to K$ given by 
    \[ T_\alpha(x) = \alpha x. \] 
    Let $f(x) \in \Q[x]$ be the 
    characteristic polynomial of $T_\alpha$ and let $p(x) \in \Q[x]$ be the 
    minimal polynomial of $\alpha$. Then we have $f(x) = p(x)^m$. 
\end{lemma}

Note that by our investigation above, we can also view $p(x)$ as the 
minimal polynomial of $T_\alpha$ restricted to $\Q(\alpha) \to \Q(\alpha)$. 
Moreover, when $m = 1$, we have $K = \Q(\alpha)$ and we 
recover our special case. 

\begin{pf}[Lemma~\ref{lemma:1.15}]
    Let $\beta = \{y_1, \dots, y_d\}$ be a basis for $\Q(\alpha)$ over $\Q$, 
    and let $\beta' = \{z_1, \dots, z_m\}$ be a basis for $K$ over $\Q(\alpha)$.
    By the tower theorem, which states that algebraic field extensions are 
    transitive, we have that $\{y_i z_j : 1 \leq i \leq d,\, 1 \leq j \leq m\}$ 
    is a basis for $K$ over $\Q$. 

    Let $A = [T_\alpha]_\beta \in \Q^{d\times d}$, where we consider the 
    restriction $T_\alpha : \Q(\alpha) \to \Q(\alpha)$. Then we have 
    \[ \alpha y_i = T_\alpha(y_i) 
    = A[y_i]_\beta \cdot \begin{bmatrix} y_1 \\ \vdots \\ y_d \end{bmatrix} 
    = Ae_i \cdot \begin{bmatrix} y_1 \\ \vdots \\ y_d \end{bmatrix} 
    = \sum_{k=1}^d a_{ki} y_k. \]
    This implies that 
    \[ \alpha y_i z_j = \sum_{k=1}^d a_{ki} y_k z_j. \] 
    Consider now the ordered basis 
    \[ \gamma = (y_1z_1, \dots, y_dz_1, y_1z_2, \dots, y_dz_2, \dots, 
    y_1z_m, \dots, y_dz_m). \] 
    We leave it as an exercise to verify that 
    \[ [T_\alpha]_\gamma = \diag(A, A, \dots, A) = 
    \begin{bmatrix} A & & & \\ & A & & \\ & & \ddots & \\ & & & A \end{bmatrix}. \] 
    It follows from our investigation that $f(x) = \det(xI - A)^m = p(x)^m$. \qed
\end{pf}

{\bf Investigation 2.} Equipped with this lemma, let's look at the general 
case. Let $K$ be a number field with $[K : \Q] = n$, and let $\alpha \in K$ 
satisfy $[K : \Q(\alpha)] = m$. Let $\lambda_i$ denote the eigenvalues of 
$f(x) \in \Q[x]$, the characteristic polynomial of $T_\alpha$. When 
$p(x) \in \Q[x]$ is the minimal polynomial of $\alpha$ over $\Q$, we know by 
Lemma~\ref{lemma:1.15} that $f(x) = p(x)^m$, so the eigenvalues of 
$f(x)$ are the eigenvalues of $p(x)$ each repeated $m$ times. Thus, 
we obtain 
\[ \Tr_{K/\Q}(\alpha) = \Tr(T_\alpha) = \sum_{i=1}^n \lambda_i = 
m(\alpha_1 + \cdots + \alpha_{n/m}), \] 
where $n/m = [\Q(\alpha) : \Q]$ by the tower theorem. Similarly, we have 
\[ N_{K/\Q}(\alpha) = (\alpha_1 \alpha_2 \cdots \alpha_{n/m})^m. \] 
As before, let $\alpha = \alpha_1, \dots, \alpha_{n/m}$ be the conjugates 
of $\alpha$, which are the roots of $p(x)$ in $\C$. 
The embeddings of $\Q(\alpha)$ into $\C$ are given by $\sigma_i(\alpha) 
= \alpha_i$ for $i = 1, \dots, n/m$. Then by \ref{A1-4}, each $\sigma_i$ 
extends to exactly $m = [K : \Q(\alpha)]$ embeddings of $K$ into $\C$. 
If $\rho_1, \dots, \rho_n$ are the embeddings of $K$ into $\C$, then 
\[ \Tr_{K/\Q}(\alpha) = m(\sigma_1(\alpha) + \cdots + \sigma_{n/m}(\alpha))
= \rho_1(\alpha) + \cdots + \rho_n(\alpha), \]
since for each $i = 1, \dots, n/m$, exactly $m$ of the $\rho_i$ are 
extensions of $\sigma_i$. Similarly, we have 
\[ N_{K/\Q}(\alpha) = \rho_1(\alpha) \cdots \rho_n(\alpha) = 
(\sigma_1(\alpha) \cdots \sigma_{n/m}(\alpha))^m. \] 
Let's investigate some more properties of norm and trace. Suppose that 
$[K : \Q] = n$. Let $\alpha, \beta \in K$ and $q \in \Q$. We'll do a reset 
of notation and let $\sigma_1, \dots, \sigma_n$ be the embeddings of $K$ 
in $\C$.
\begin{enumerate}[(1)]
    \item Looking at trace, we have 
    \begin{align*}
        \Tr_{K/\Q}(q\alpha + \beta) 
        &= \sigma_1(q\alpha + \beta) + \cdots + \sigma_n(q\alpha + \beta) \\ 
        &= q\sigma_1(\alpha) + \sigma_1(\beta) + \cdots + q\sigma_n(\alpha) + \sigma_n(\beta) \\ 
        &= q\Tr_{K/\Q}(\alpha) + \Tr_{K/\Q}(\beta),
    \end{align*}
    where the second equality is because the embeddings fix $\Q$.
    In particular, trace is a $\Q$-linear map! 
    
    \item We also have that 
    \[ N_{K/\Q}(q\alpha\beta) = \prod_{i=1}^n \sigma_i(q\alpha\beta) 
    = \prod_{i=1}^n q\sigma_i(\alpha) \sigma_i(\beta) = q^n N_{K/\Q}(\alpha) 
    N_{K/\Q}(\beta). \] 
    So norm doesn't behave too well with respect to scalar multiplication, but 
    it is a multiplicative map.
    
    \item Finally, suppose that $\alpha \in {\cal O}_K$. Note that the 
    $\sigma_i(\alpha)$ are also roots of the minimal polynomial 
    $p(x)$ of $\alpha$. In particular, we have $\sigma_i(\alpha) \in {\cal O}_K$, 
    and hence 
    \[ \Tr_{K/\Q}(\alpha) = \sum_{i=1}^n \sigma_i(\alpha) \in {\cal O}_K \cap \Q = \Z. \] 
    Similarly, we see that $N_{K/\Q}(\alpha) \in \Z$. 
\end{enumerate} 
To end our lengthy discussion on traces and norms, let's compute them 
on a simple example. Consider $K = \Q(\sqrt{d})$ where $d \neq 1$ is square-free.
Let $\alpha = a + b\sqrt{d}$ with $b \neq 0$. Then $\alpha$ has one 
other conjugate, namely $a - b\sqrt{d}$, so we have 
\begin{align*}
    \Tr_{K/\Q}(\alpha) &= (a + b\sqrt{d}) + (a - b\sqrt{d}) = 2a, \\
    N_{K/\Q}(\alpha) &= (a + b\sqrt{d})(a - b\sqrt{d}) = a^2 - db^2.
\end{align*}
Recall from ring theory that an element $a + b\sqrt{d} \in \Z[\sqrt{d}]$ is a 
unit if and only if $a^2 - db^2 = \pm1$. In fact, we can prove something more 
general. Let $K$ be a number field, let $R = {\cal O}_K$ be its ring of integers, 
and let $\alpha \in R$. We leave it as an exercise to show that $\alpha \in R^\times$ 
if and only if $N_{K/\Q}(\alpha) = \pm1$, where $R^\times$ denotes the group of units. 

Let's not lose track of why we moved towards discussing traces and norms. 
Recall that we were discussing the additive structure of ${\cal O}_K$ 
for a number field $K$ with $[K : \Q] = n$. 
Our aim was to prove that $({\cal O}_K, +) \cong \Z^n$ as $\Z$-modules 
so that $({\cal O}_K, +)$ is a free $\Z$-module of rank $n$. Trace turns 
out to be the star of the show here!

\begin{theo}{theo:1.16}
    Let $K$ be a number field with degree $[K : \Q] = n$. Then 
    $({\cal O}_K, +) \cong \Z^n$ as $\Z$-modules. In particular, 
    $({\cal O}_K, +)$ is a free $\Z$-module of rank $n$. 
\end{theo}
\begin{pf}[Theorem~\ref{theo:1.16}]
    Let $\{x_1, \dots, x_n\}$ be a $\Q$-basis for $K$. By part (b) of \ref{A1-1}, 
    we may assume without loss of generality that $x_i \in {\cal O}_K$. Define 
    a map $\varphi : K \to \Q^n$ by 
    \[ \varphi(x) = (\Tr_{K/\Q}(xx_1), \dots, \Tr_{K/\Q}(xx_n)). \] 
    Note that $\varphi$ is $\Q$-linear because we showed earlier that 
    $\Tr_{K/\Q}$ is a $\Q$-linear map. 

    Let's look for the kernel of $\varphi$. Note that if $\varphi(x) = 
    (0, \dots, 0)$, then $\Tr_{K/\Q}(xx_i) = 0$ for all $i = 1, \dots, n$. 
    But this implies that $\Tr_{K/\Q}(xy) = 0$ for all $y \in K$ since 
    the $x_i$ form a $\Q$-basis for $K$. Moreover, if $x \neq 0$, then
    \[ \Tr_{K/\Q}(xx^{-1}) = \Tr_{K/\Q}(1) = n \neq 0. \] 
    Thus, $\ker\varphi = \{0\}$ and $\varphi$ is an injective linear transformation.

    Next, we see that ${\cal O}_K \cong \varphi({\cal O}_K) \subseteq \Z^n$
    because we showed before that the trace of an algebraic integer 
    was in $\Z$. So ${\cal O}_K$ is isomorphic to a $\Z$-submodule of $\Z^n$. By 
    Proposition~\ref{prop:1.12}, it follows that ${\cal O}_K$ is free 
    with $\rank({\cal O}_K) \leq n$. But $\{x_1, \dots, x_n\} \subseteq 
    {\cal O}_K$ is linearly independent over $\Q$ and hence linearly independent 
    over $\Z$ as well. This gives us $\rank({\cal O}_K) \geq n$ and thus 
    $\rank({\cal O}_K) = n$, as desired. \qed
\end{pf}\vspace{-0.25cm}

This gives us the existence of an integral basis for ${\cal O}_K$. 

{\bf Warning!} Note that for a number field $K$, a $\Q$-basis consisting only of 
algebraic integers is not necessarily an integral basis for ${\cal O}_K$. For 
example, let $K = \Q(\sqrt{5})$. $\{1, \sqrt{5}\} \subseteq 
\Q(\sqrt{5})$ is a $\Q$-basis of algebraic integers, but is not an integral 
basis for ${\cal O}_K$ since $\frac{1+\sqrt{5}}{2} \in {\cal O}_K$. 

Due to Theorem~\ref{theo:1.16}, we also get the following corollary. 

\begin{cor}{cor:1.17}
    Let $K$ be a number field with $[K : \Q] = n$, and let $R = {\cal O}_K$ be 
    its ring of integers. If $I$ is a non-zero ideal of $R$, then 
    $(I, +) \cong \Z^n$. 
\end{cor}
\begin{pf}[Corollary~\ref{cor:1.17}]
    Let $\{x_1, \dots, x_n\}$ be an integral basis for $R = {\cal O}_K$, 
    which exists due to Theorem~\ref{theo:1.16}. Take $a \in I$ such that 
    $a \neq 0$. We leave it as an exercise to show that 
    $\{ax_1, \dots, ax_n\} \subseteq I$ is linearly independent over $\Z$, 
    so $\rank(I) \geq n$. Then by Proposition~\ref{prop:1.12}, we have 
    $\rank(I) \leq n$ and thus $\rank(I) = n$. \qed 
\end{pf}\vspace{-0.25cm}

We steal one more fact from commutative algebra. This is a consequence of the 
structure theorem of finitely generated modules over PIDs, and we know that 
$\Z$ is a PID.

\begin{prop}{prop:1.18}
    If $M$ is a finitely generated $\Z$-module, then $M \cong \Z^n \times T$ 
    where $T$ is finite. (We call $\Z^n$ the free part and $T$ the 
    torsion part.)
\end{prop}

We make use this fact to prove one more corollary.

\begin{cor}{cor:1.19}
    Let $K$ be a number field with degree $[K : \Q] = n$, and let 
    $R = {\cal O}_K$ be its ring of integers. 
    If $I$ is a non-zero ideal of $R$, then $R/I$ is finite. 
\end{cor}   